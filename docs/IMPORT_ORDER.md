# SmartKidz Data Import Order

**IMPORTANT:** You must import tables in this specific order to avoid Foreign Key (FK) errors.

## Phase 1: Reference Data (System)
These tables must exist before any lessons can be created.

1. **curricula** (Defines AC9, CCSS, etc.)
2. **subjects** (MATH, ENG, SCI, etc.)
3. **skills** (Competency tree)
4. **badges** (Reward definitions)

*(Note: The 'Seed System Data' button in the Admin panel handles this phase automatically)*

## Phase 2: Core Lesson Structure
Import the CSVs generated by `generate_rich_curriculum.js` in this order:

1. **lesson_templates_out.csv** (Base definition of a lesson)
2. **lesson_editions_out.csv** (Localised version, links to templates)
3. **lesson_content_items_out.csv** (The actual slides/activities, links to editions)

## Phase 3: Metadata Layers (Enrichment)
These attach extra data to the content items. Import these after Phase 2.

4. **content_item_pedagogy_out.csv** (Bloom's taxonomy, hints)
5. **content_item_gamification_out.csv** (XP, coins, streaks)
6. **content_item_concepts_out.csv** (Links items to specific skills)
7. **content_item_accessibility_out.csv** (TTS overrides, alt text)

## Phase 4: Assets (Media)
8. **assets_out.csv** (The raw file references)
9. **content_item_assets_out.csv** (Linking assets to content items)

## Troubleshooting
- **Error: Key (template_id)=... is not present in table "lesson_templates".**
  - *Fix:* You tried to import Editions before Templates. Import Templates first.
- **Error: Key (content_id)=... is not present in table "lesson_content_items".**
  - *Fix:* You tried to import Pedagogy/Gamification before Content Items. Import Items first.